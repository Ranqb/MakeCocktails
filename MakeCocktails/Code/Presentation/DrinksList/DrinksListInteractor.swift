//
//  DrinksListInteractor.swift
//  MakeCocktails
//
//  Created by Andrey Nedov on 22/03/2019.
//  Copyright (c) 2019 Andrey Nedov. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol DrinksListBusinessLogic
{
    func fetchDrinks(request: DrinksList.FetchDrinks.Request)
    func selectDrink(request: DrinksList.SelectDrink.Request)
    
}

protocol DrinksListDataStore
{
    var drinkID: String? {get set}
}

class DrinksListInteractor: DrinksListBusinessLogic, DrinksListDataStore
{
    var drinkID: String?
    
    var presenter: DrinksListPresentationLogic?
    private var apiWorker: DrinksListWorker = DrinksListWorker(service: APIService())
    
    func fetchDrinks(request: DrinksList.FetchDrinks.Request) {
        if request.searchText.count > 0 {
            apiWorker.getDrinks(by: request.searchText) { (result) in
                let response = DrinksList.FetchDrinks.Response(result: result)
                self.presenter?.presentDrinks(response: response)
            }
        }else{
            apiWorker.getPopularDrinks { (result) in
                let response = DrinksList.FetchDrinks.Response(result: result)
                self.presenter?.presentDrinks(response: response)
            }
        }
    }
    
    func selectDrink(request: DrinksList.SelectDrink.Request) {
        drinkID = request.drinkID
    }
}

